<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Admin Dashboard | SmartCare</title>
  <link rel="stylesheet" href="style.css">
  <style>
    body {
      margin: 0;
      font-family: system-ui;
      background: #f1f5f9;
    }
    nav {
      background: #1e40af;
      color: white;
      padding: 15px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .wrap {
      max-width: 900px;
      margin: 30px auto;
    }
    .card {
      background: white;
      padding: 15px;
      border-radius: 10px;
      box-shadow: 0 6px 15px rgba(0,0,0,0.08);
      margin-bottom: 15px;
    }
    button {
      padding: 6px 10px;
      margin-right: 5px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    .del { background:#dc2626; color:white; }
    .edit { background:#2563eb; color:white; }
  </style>
</head>
<body>

<nav>
  <h3>ğŸ¥ SmartCare â€“ Admin Dashboard</h3>
  <button onclick="logout()">Logout</button>
</nav>

<div class="wrap">
  <h2>ğŸ“‹ All Hospital Appointments</h2>
  <div id="list"></div>
</div>

<script>
/* ğŸ”’ PROTECT PAGE */
if (localStorage.getItem("adminLoggedIn") !== "yes") {
  location.href = "admin-login.html";
}

/* ğŸ“¦ LOAD DATA */
function getData() {
  return JSON.parse(localStorage.getItem("appointments")) || [];
}

function saveData(d) {
  localStorage.setItem("appointments", JSON.stringify(d));
}

/* ğŸ“‹ RENDER */
function render() {
  const data = getData();
  list.innerHTML = "";

  if (!data.length) {
    list.innerHTML = "<p>No records found</p>";
    return;
  }

  data.forEach((a, i) => {
    const div = document.createElement("div");
    div.className = "card";
    div.innerHTML = `
      <b>Patient:</b> ${a.patient}<br>
      <b>Doctor:</b> ${a.doctor}<br>
      <b>Date:</b> ${a.date}<br><br>
      <button class="edit" onclick="editRec(${i})">Edit</button>
      <button class="del" onclick="delRec(${i})">Delete</button>
    `;
    list.appendChild(div);
  });
}

/* âœï¸ EDIT */
function editRec(i) {
  const d = getData();
  const p = prompt("Patient Name", d[i].patient);
  const doc = prompt("Doctor Name", d[i].doctor);
  const date = prompt("Date", d[i].date);

  if (!p || !doc || !date) return;

  d[i] = { patient: p, doctor: doc, date };
  saveData(d);
  render();
}

/* âŒ DELETE */
function delRec(i) {
  if (!confirm("Delete this record?")) return;
  const d = getData();
  d.splice(i, 1);
  saveData(d);
  render();
}

/* ğŸšª LOGOUT */
function logout() {
  localStorage.removeItem("adminLoggedIn");
  location.href = "admin-login.html";
}

render();
</script>

</body>
</html>
