<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Admin Dashboard | SmartCare</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="stylesheet" href="style.css">
</head>

<body>

<nav>
  <h2>ğŸ¥ SmartCare â€“ Admin Dashboard</h2>
</nav>

<section class="section">
  <h2>ğŸ“‹ All Appointments</h2>
  <div id="list">Loading appointmentsâ€¦</div>
</section>

<script>
const API = "https://smartcare-hospital.onrender.com";

/* ========= LOAD APPOINTMENTS ========= */
function loadAppointments() {
  fetch(`${API}/admin/appointments`)
    .then(res => res.json())
    .then(data => {
      const list = document.getElementById("list");
      list.innerHTML = "";

      if (!data.length) {
        list.innerHTML = "<p>No appointments found</p>";
        return;
      }

      data.forEach(a => {
        const card = document.createElement("div");
        card.className = "card";
        card.innerHTML = `
          <b>${a.patientName}</b><br>
          ${a.doctor} | ${a.date}
          <br>
          <button onclick="deleteAppointment('${a._id}')">ğŸ—‘ Delete</button>
        `;
        list.appendChild(card);
      });
    })
    .catch(() => {
      document.getElementById("list").textContent =
        "Failed to load appointments";
    });
}

/* ========= DELETE ========= */
function deleteAppointment(id) {
  if (!confirm("Delete this appointment?")) return;

  fetch(`${API}/admin/appointments/${id}`, {
    method: "DELETE"
  }).then(loadAppointments);
}

loadAppointments();
</script>

</body>
</html>
