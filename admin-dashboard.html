<!DOCTYPE html>
<html>
<head>
  <title>Admin Dashboard | SmartCare</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<nav>
  <h2>ğŸ¥ SmartCare Admin</h2>
  <button onclick="logout()">Logout</button>
</nav>

<section class="section">
  <h2>ğŸ“‹ All Appointments</h2>
  <div id="list"></div>
</section>

<script>
const API = "https://smartcare-hospital.onrender.com";

function load() {
  fetch(`${API}/admin/appointments`, { credentials: "include" })
    .then(r => r.ok ? r.json() : Promise.reject())
    .then(data => {
      list.innerHTML = "";
      data.forEach(a => {
        const d = document.createElement("div");
        d.className = "card";
        d.innerHTML = `
          <b>${a.patientName}</b><br>
          ${a.doctor} | ${a.date}
          <br><button onclick="del('${a._id}')">ğŸ—‘ Delete</button>
        `;
        list.appendChild(d);
      });
    })
    .catch(() => location.href = "admin-login.html");
}

function del(id) {
  fetch(`${API}/admin/appointments/${id}`, {
    method: "DELETE",
    credentials: "include"
  }).then(load);
}

function logout() {
  fetch(`${API}/logout`, {
    method: "POST",
    credentials: "include"
  }).then(() => location.href = "index.html");
}

load();
</script>

</body>
</html>
