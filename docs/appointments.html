<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Book Appointment | SmartCare</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="style.css" />
</head>

<body>

<nav>
  <h2>üè• SmartCare</h2>
  <div>
    <a href="index.html">Home</a>
    <a href="appointments.html"><b>Appointments</b></a>
    <a href="doctors.html">Doctors</a>
    <a href="prescription.html">Prescription</a>
    <a href="admin-login.html">Admin</a>
  </div>
</nav>

<section class="section">
  <h2>üìÖ Book Appointment</h2>

  <form id="appointmentForm">

    <input id="aptPatient" placeholder="Patient Name" required />
    <input id="aptDate" type="date" required />

    <select id="aptDoctor" required>
      <option value="">-- Select Doctor --</option>
      <option value="Dr. A. Rao">Dr. A. Rao (General Physician)</option>
      <option value="Dr. Meena S.">Dr. Meena S. (Pediatrician)</option>
      <option value="Dr. K. Kumar">Dr. K. Kumar (Orthopedic)</option>
      <option value="Dr. P. Sharma">Dr. P. Sharma (Cardiologist)</option>
    </select>

    <button type="submit" style="margin-top:20px;">
      Book Appointment
    </button>

  </form>
</section>

<script>
const API = "https://smartcare-hospital.onrender.com";

document.getElementById("appointmentForm").addEventListener("submit", async function (e) {
  e.preventDefault();

  const patientName = aptPatient.value.trim();
  const doctor = aptDoctor.value;
  const date = aptDate.value;

  if (!patientName || !doctor || !date) {
    alert("Please fill all fields");
    return;
  }

  try {
    const res = await fetch(`${API}/appointments`, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ patientName, doctor, date })
    });

    if (!res.ok) throw new Error();

    alert("‚úÖ Appointment booked successfully");
    aptPatient.value = "";
    aptDate.value = "";
    aptDoctor.value = "";

  } catch {
    alert("‚ùå Server error while booking appointment");
  }
});
</script>

</body>
</html>
