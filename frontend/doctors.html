<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Doctors | SmartCare</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
</head>
<body>

<!-- ================= NAVBAR ================= -->
<nav>
  <h2>üè• SmartCare</h2>
  <div style="display:flex;gap:18px;align-items:center;">
    <a href="index.html">Home</a>
    <a href="appointments.html">Appointments</a>
    <a href="doctors.html"><b>Doctors</b></a>
    <a href="prescription.html">Prescription</a>
    <a href="admin.html">Admin</a>
  </div>
</nav>

<!-- ================= DOCTOR DASHBOARD ================= -->
<section class="section" id="doctorDashboard" style="display:none;">
  <div style="display:flex;justify-content:space-between;align-items:center;">
    <h2>üë®‚Äç‚öïÔ∏è Doctor Dashboard</h2>
    <button onclick="doctorLogout()" class="btn-danger">Logout</button>
  </div>

  <h3 style="margin-top:30px;">üìã My Appointments</h3>
  <div id="doctorAppointmentCards" class="card-grid"></div>
</section>

<script>
/* ================= AUTH CHECK ================= */
const token = localStorage.getItem("token");
const role = localStorage.getItem("role");

if (!token || role !== "doctor") {
  alert("Access denied. Doctors only.");
  window.location.href = "login.html";
}

/* ================= LOGOUT ================= */
function doctorLogout() {
  localStorage.removeItem("token");
  localStorage.removeItem("role");
  window.location.href = "login.html";
}

/* ================= LOAD DOCTOR DATA ================= */
function loadDoctorDashboard() {
  document.getElementById("doctorDashboard").style.display = "block";

  // TEMP DATA (until backend appointment API is connected)
  const appointments = JSON.parse(localStorage.getItem("appointments")) || [];

  const container = document.getElementById("doctorAppointmentCards");

  if (appointments.length === 0) {
    container.innerHTML = "<p>No appointments assigned.</p>";
    return;
  }

  container.innerHTML = appointments.map(a => `
    <div class="card">
      <h4>Patient: ${a.patient}</h4>
      <p>Date: ${a.date}</p>
      <p>Time: ${a.time || "N/A"}</p>
      <p>Status: ${a.status || "Scheduled"}</p>
    </div>
  `).join("");
}

/* ================= INIT ================= */
loadDoctorDashboard();
</script>

</body>
</html>
